-- ----------------------------------------------------
-- sys 접속
cmd>sqlplus / as  sysdba
또는
cmd>sqlplus sys/"암호" as  sysdba

or develeoper sys계정 접속
-- ----------------------------------------------------
--  UriDongNae 사용자 추가 및 권한 설정

ALTER SESSION SET "_ORACLE_SCRIPT" = true;

GRANT CONNECT, RESOURCE, UNLIMITED TABLESPACE TO UriDongNaeIDENTIFIED BY "java$!";
ALTER USER UriDongNaeDEFAULT TABLESPACE USERS;
ALTER USER UriDongNaeTEMPORARY TABLESPACE TEMP;


-- ----------------------------------------------------
-- 접속 후 기본 테이블 및 계정 정보 삽입

CREATE TABLE member1 (
     userId        VARCHAR2(50) NOT NULL
     ,userPwd    VARCHAR2(100) NOT NULL
     ,userName  VARCHAR2(50) NOT NULL
     ,nickName  VARCHAR2(50) NOT NULL
     ,type     NUMBER(1) DEFAULT 1
     ,created_date    DATE DEFAULT SYSDATE
     ,CONSTRAINT pk_member1_userId PRIMARY KEY(userId)
);
CREATE TABLE member2 (
     userId      VARCHAR2(50) NOT NULL
     ,birth        DATE NOT NULL
     ,email       VARCHAR2(100)
     ,tel           VARCHAR2(20) NOT NULL
     ,zipcode          VARCHAR2(7) 
     ,addr1      VARCHAR2(100) 
     ,addr2      VARCHAR2(100)
     ,myComment    VARCHAR2(1000)
     ,CONSTRAINT pk_member2_userId PRIMARY KEY(userId)
     ,CONSTRAINT fk_member2_userId FOREIGN KEY(userId)
                  REFERENCES member1(userId) ON DELETE CASCADE
);

INSERT INTO member1(userId, userPwd, userName, nickName) VALUES 
    ('admin', 'admin','관리자','관리자' );
    
INSERT INTO member1(userId, userPwd, userName, nickName) VALUES ('test1', '1111','테스트1', '테스트1' );

INSERT INTO member1(userId, userPwd, userName, nickName) VALUES ('test2', '1111','테스트2', '테스트2' );

INSERT INTO member1(userId, userPwd, userName, nickName) VALUES ('test3', '1111','테스트3', '테스트3' );

INSERT INTO member1(userId, userPwd, userName, nickName) VALUES ('test4', '1111','테스트4', '테스트4' );

INSERT INTO member1(userId, userPwd, userName, nickName) VALUES ('test5', '1111','테스트5', '테스트5' );

INSERT INTO member1(userId, userPwd, userName, nickName) VALUES ('test6', '1111','테스트6', '테스트6' );

COMMIT;

SELECT * FROM member1;

CREATE TABLE message(
    noteNum NUMBER DEFAULT 1 PRIMARY KEY,
    receiveUser VARCHAR2(50) NOT NULL,
    sendUser VARCHAR2(50) NOT NULL,
    mycontent VARCHAR2(1000) NOT NULL,
    sendTime DATE DEFAULT SYSDATE,
    receiveTime DATE DEFAULT SYSDATE,
    CONSTRAINT fk_message_receive_userId FOREIGN KEY(receiveUser)
                  REFERENCES member1(userId) ON DELETE CASCADE,
    CONSTRAINT fk_message_send_userId FOREIGN KEY(sendUser)
                  REFERENCES member1(userId) ON DELETE CASCADE
);

CREATE TABLE like_count(
    reciveUser VARCHAR2(50) NOT NULL,
    giveUser VARCHAR2(50) NOT NULL,
    like_count NUMBER(38) DEFAULT 1,
    CONSTRAINT fk_like_receive_userId FOREIGN KEY(reciveUser)
                  REFERENCES member1(userId) ON DELETE CASCADE
);

CREATE SEQUENCE like_seq
    INCREMENT BY 1
    START WITH 1
    NOMAXVALUE
    NOCYCLE
    NOCACHE;